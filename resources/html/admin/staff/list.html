{% extends "metronic/index.html" %}

{% block title %}–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏{% endblock %}
{% block sub-header-title %}–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏{% endblock %}
{% block sub-header-sub-title %}–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏{% endblock %}

{% block sub-header-toolbar %}
<div class="kt-subheader__toolbar">
  <div class="kt-subheader__wrapper">
    <a href="{% path admin.staff/create %}" class="btn btn-ment kt-subheader__btn-options">
      <i class="la la-cloud-upload"></i> {{ "–î–æ–±–∞–≤–∏—Ç—å"|t }}
    </a>
  </div>
</div>
{% endblock %}

{% block content %}
<div class="kt-portlet">
  <div class="kt-portlet__head kt-portlet__head--lg">
    <div class="kt-portlet__head-label">
      <h3 class="kt-portlet__head-title">
        {{ "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏"|t }}
      </h3>
    </div>
  </div>
  <div class="kt-portlet__body">
    <form class="kt-form kt-form--label-right kt-margin-t-10 kt-margin-b-20">
      <div class="form-row align-items-center mb-3">
        <div class="form-group col-md-6 col-sm-12 col-lg-4 mb-3 px-3">
          <label class="font-weight-lighter">{{ "–†–æ–ª—å"|t }}</label>
          <select class="form-control" name="role">
            <option value=""></option>
            <option value="admin" {% ifequal request.parameters.query.role "admin" %} selected {% endifequal %}>{{ "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä"|t }}</option>
            <option value="inspector" {% ifequal request.parameters.query.role "inspector" %} selected {% endifequal %}>{{ "–ò–Ω—Å–ø–µ–∫—Ç–æ—Ä"|t }}</option>
          </select>
        </div>
        <div class="form-group col-md-6 col-sm-12 col-lg-4 mb-3 px-3">
          <label class="font-weight-lighter">{{ "–ì–æ—Ä–æ–¥ –∏–ª–∏ –æ–±–ª–∞—Å—Ç—å"|t }}</label>
          {% area-select area_id false @request.parameters.query.area_id true %}
        </div>
        <div class="form-group col-md-6 col-sm-12 col-lg-4 mb-3 px-3">
          <label class="font-weight-lighter ">{{ "–†–∞–π–æ–Ω"|t }}</label>
          {% district-select district_id false @request.parameters.query.district_id true %}
        </div>
        <div class="form-group col-md-6 col-sm-12 col-lg-4 mb-3 px-3">
          <label class="font-weight-lighter">{{ "–ü–æ–ª–Ω–æ–µ –∏–º—è"|t}}</label>
          <input type="text" class="form-control" name="name" value="{{ request.parameters.query.name }}"/>
        </div>
      </div>
      <div class="form-row">
        <div class="col-md-6 col-sm-12 col-lg-4 px-3">
          <button class="btn btn-outline-secondary">{{ "–ü–æ–∏—Å–∫"|t }}</button>
          <a href="?" class="btn btn-link">{{ "–°–±—Ä–æ—Å —Ñ–∏–ª—å—Ç—Ä–∞"|t }}</a>
        </div>
      </div>
    </form>

    {% empty-wrapper paged-rows %}
    <table class="table">
      <thead>
      <tr>
        <th>{{ "–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"|t }} <br> {{ "–†–æ–ª—å"|t }}</th>
        <th>{{ "–ü–æ–ª–Ω–æ–µ –∏–º—è"|t }} <br> {{ "–ó–≤–∞–Ω–∏–µ"|t }}</th>
        <th>{{ "–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞"|t }} <br> {{ "–ü—É–±–ª–∏—á–Ω—ã–π –Ω–æ–º–µ—Ä"|t }}</th>
        <th>{{ "–†–µ–≥–∏–æ–Ω"|t }}</th>
        <th class="text-right">{{ "–î–µ–π—Å—Ç–≤–∏–µ"|t }}</th>
      </tr>
      </thead>
      <tbody>
      {% for staff in paged-rows %}
      <tr>
        <td>
          {{ staff.username }} {% if not staff.active %} üö´ {% endif %}<br/>
          {% ifequal staff.role "admin" %}
          <span class="text-success">{{ "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä"|t }}</span>
          {% else %}
          <span class="text-danger">{{ "–ò–Ω—Å–ø–µ–∫—Ç–æ—Ä"|t }}</span>
          {% endifequal %}
        </td>
        <td>
          {{ staff.first_name }} {{ staff.middle_name }} {{ staff.last_name }}<br/>
          <span class="kt-font-info">{{ staff.rank }}</span>
        </td>
        <td class="align-middle">
          {{ staff.phone|phone }}<br/>
          <span class="kt-label-font-color-1">{{ staff.public_phone|phone }}</span>
        </td>
        <td class="align-middle">{% ifequal staff.role "inspector" %} {{ staff|address:false }} {% endifequal %}</td>

        <td class="text-right">
          <a href="{% path admin.staff/edit id @staff.id %}"
             class="btn btn-sm btn-clean btn-icon btn-icon-md"
             title="{{ "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"|t }}">
          <i class="la la-edit"></i>
          </a>
          <form class="d-inline" method="post" action="{% path admin.staff/delete id @staff.id %}">
            {% csrf-field %}
            <button class="btn btn-sm btn-clean btn-icon btn-icon-md confirm-click" data-confirmation='{{ "–í—ã —Ç–æ—á–Ω–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è?"|t }}'>
              <i class="la la-remove"></i>
            </button>
          </form>
        </td>
      </tr>
      {% endfor %}
      </tbody>
    </table>

    {% pager @total-pages @current-page @request.query-params %}
    {% end-empty-wrapper %}
  </div>
</div>

{% endblock %}
